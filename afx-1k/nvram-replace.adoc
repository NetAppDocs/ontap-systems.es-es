---
permalink: afx-1k/nvram-replace.html 
sidebar: sidebar 
keywords: afx 1k, replace nvram 
summary: Reemplace la NVRAM en su sistema de almacenamiento AFX 1K cuando la memoria no volátil se vuelva defectuosa o requiera una actualización. 
---
= Reemplazar NVRAM - AFX 1K
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Reemplace la NVRAM en su sistema de almacenamiento AFX 1K cuando la memoria no volátil se vuelva defectuosa o requiera una actualización.  El proceso de reemplazo implica apagar el controlador dañado, reemplazar el módulo NVRAM o el DIMM NVRAM y devolver la pieza defectuosa a NetApp.

El módulo de NVRAM consta de hardware NVRAM12 y DIMM reemplazables en campo. Puede sustituir un módulo NVRAM con fallos o los DIMM dentro del módulo NVRAM.

.Antes de empezar
* Asegúrese de tener la pieza de repuesto disponible. Debe sustituir el componente con errores con un componente de reemplazo que haya recibido de NetApp.
* Asegúrese de que el resto de los componentes del sistema de almacenamiento funcionan correctamente; de lo contrario, póngase en contacto con https://support.netapp.com["Soporte de NetApp"].




== Paso 1: Apague el controlador dañado

Apague o tome el control de la controladora dañada.

Para apagar el controlador dañado, debe determinar el estado del controlador y, si es necesario, realizar una toma de control del almacenamiento del controlador para que el controlador en buen estado continúe proporcionando datos desde el almacenamiento del controlador dañado.

.Acerca de esta tarea
* Si tiene un clúster con más de cuatro nodos, debe estar en quórum.  Para ver información del clúster sobre sus nodos, utilice el `cluster show` dominio.  Para obtener más información sobre el `cluster show` comando, verlink:https://docs.netapp.com/us-en/ontap/system-admin/display-nodes-cluster-task.html["Ver detalles a nivel de nodo en un clúster ONTAP"^] .
* Si el clúster no está en quórum o si el estado o la elegibilidad de cualquier controlador (excepto el controlador dañado) se muestra como falso, debe corregir el problema antes de apagar el controlador dañado. Ver link:https://docs.netapp.com/us-en/ontap/system-admin/synchronize-node-cluster-task.html?q=Quorum["Sincronice un nodo con el clúster"^] .


.Pasos
. Si AutoSupport está habilitado, elimine la creación automática de casos invocando un mensaje de AutoSupport:
+
`system node autosupport invoke -node * -type all -message MAINT=<# of hours>h`

+
El siguiente mensaje de AutoSupport suprime la creación automática de casos durante dos horas:

+
`cluster1:> system node autosupport invoke -node * -type all -message MAINT=2h`

. Deshabilitar la devolución automática desde la consola del controlador dañado:
+
`storage failover modify -node impaired-node -auto-giveback-of false`

+

NOTE: Cuando veas _¿Quieres desactivar la devolución automática?_, escribe `y` .

+
.. Si está ejecutando ONTAP versión 9.17.1 y no se puede iniciar el controlador dañado o ya está tomado, debe quitar el enlace de interconexión de alta disponibilidad del controlador en buen estado antes de iniciar el controlador dañado.  Esto evita que el controlador dañado realice la devolución automática.
+
`system ha interconnect link off -node healthy-node -link 0`

+
`system ha interconnect link off -node healthy-node -link 1`

+

NOTE: Si no está ejecutando la versión 9.17.1 de ONTAP , omita el paso anterior y vaya al paso 3.



. Lleve la controladora dañada al aviso DEL CARGADOR:
+
[cols="1,2"]
|===
| Si el controlador dañado está mostrando... | Realice lo siguiente... 


 a| 
El aviso del CARGADOR
 a| 
Vaya al paso siguiente.



 a| 
Solicitud del sistema o solicitud de contraseña
 a| 
Tomar el control o detener el controlador dañado desde el controlador sano:
`storage failover takeover -ofnode _impaired_node_name_ -halt _true_`

El parámetro _-halt true_ lleva el nodo dañado al indicador LOADER.

|===




== Paso 2: Reemplace el módulo NVRAM o NVRAM DIMM

Sustituya el módulo NVRAM o los DIMM de NVRAM con la siguiente opción adecuada.

[role="tabbed-block"]
====
.Opción 1: Sustituya el módulo NVRAM
--
Para sustituir el módulo NVRAM, búsquelo en la ranura 4/5 del compartimento y siga la secuencia específica de pasos.

. Si usted no está ya conectado a tierra, correctamente tierra usted mismo.
. Desconecte los cables de alimentación de las fuentes de alimentación del controlador.
. Gire la bandeja de gestión de cables hacia abajo tirando suavemente de las clavijas de los extremos de la bandeja y girando la bandeja hacia abajo.
. Retire el módulo NVRAM defectuoso del compartimento:
+
.. Pulse el botón de bloqueo de la leva.
+
El botón de leva se aleja de la carcasa.

.. Gire el pestillo de la leva hacia abajo hasta el tope.
.. Retire el módulo NVRAM defectuoso de la carcasa enganchando el dedo en la abertura de la palanca de leva y sacando el módulo de la carcasa.
+
image::../media/drw_a1k_nvram12_remove_replace_ieops-1380.svg[Retire el módulo NVRAM12 y los DIMM]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["Número de llamada 1"]
| Botón de bloqueo de leva 


 a| 
image:../media/icon_round_2.png["Número de llamada 2"]
 a| 
Lengüetas de bloqueo DIMM

|===


. Ajuste el módulo NVRAM en una superficie estable.
. Retire los DIMM, uno por uno, del módulo NVRAM dañado e instálelos en el módulo NVRAM de reemplazo.
. Instale el módulo NVRAM de reemplazo en el compartimento:
+
.. Alinee el módulo con los bordes de la abertura de la carcasa en la ranura 4/5.
.. Deslice suavemente el módulo en la ranura hasta el fondo y, a continuación, gire el pestillo de la leva completamente hacia arriba para bloquear el módulo en su sitio.


. Gire la bandeja de gestión de cables hasta la posición cerrada.


--
.Opción 2: Sustituya el módulo DIMM de NVRAM
--
Para sustituir DIMM NVRAM en el módulo NVRAM, debe eliminar el módulo NVRAM y, a continuación, sustituir el DIMM de destino.

. Si usted no está ya conectado a tierra, correctamente tierra usted mismo.
. Desconecte los cables de alimentación de las fuentes de alimentación.
. Gire la bandeja de gestión de cables hacia abajo tirando suavemente de las clavijas de los extremos de la bandeja y girando la bandeja hacia abajo.
. Retire el módulo NVRAM de destino del compartimento.
+
image::../media/drw_a1k_nvram12_remove_replace_ieops-1380.svg[Quite el módulo NVRAM 12 y los DIMM]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["Número de llamada 1"]
| Botón de bloqueo de leva 


 a| 
image:../media/icon_round_2.png["Número de llamada 2"]
 a| 
Lengüetas de bloqueo DIMM

|===
. Ajuste el módulo NVRAM en una superficie estable.
. Localice el DIMM que se va a sustituir dentro del módulo NVRAM.
+

NOTE: Consulte la etiqueta de asignación de FRU en el lateral del módulo NVRAM para determinar la ubicación de las ranuras DIMM 1 y 2.

. Retire el módulo DIMM presionando hacia abajo las lengüetas de bloqueo del módulo DIMM y levantando el módulo DIMM para extraerlo del conector.
. Instale el módulo DIMM de repuesto alineando el módulo DIMM con el zócalo e empuje suavemente el módulo DIMM hacia el zócalo hasta que las lengüetas de bloqueo queden trabadas en su lugar.
. Instale el módulo NVRAM en el compartimento:
+
.. Deslice suavemente el módulo en la ranura hasta que el pestillo de leva comience a acoplarse con el pasador de leva de E/S y, a continuación, gire el pestillo de leva completamente hacia arriba para bloquear el módulo en su sitio.


. Gire la bandeja de gestión de cables hasta la posición cerrada.


--
====


== Paso 3: Reinicie el controlador

Después de sustituir el FRU, debe reiniciar el módulo de la controladora.

. Vuelva a enchufar los cables de alimentación a la fuente de alimentación.
+
El sistema comenzará a reiniciarse, normalmente en el aviso del CARGADOR.

. Ingresar `bye` en el indicador LOADER.




== Paso 4: Reemplazo completo de NVRAM

Realice los siguientes pasos para completar el reemplazo de NVRAM .

.Pasos
. En el aviso del CARGADOR en la controladora, arranque la controladora e introduzca _y_ cuando se le solicite anular el ID del sistema debido a una discrepancia del ID del sistema.
+
El siguiente es un ejemplo de la solicitud para anular el ID del sistema:

+
[listing]
----
WARNING: System ID mismatch. This usually occurs when replacing a boot device or NVRAM cards!
Override system ID? {y|n}
----
. Desde el controlador en buen estado, verifique que el nuevo ID del sistema asociado se haya asignado automáticamente:
`_storage failover show_`
+
En la salida del comando, debería ver un mensaje que muestra el estado actual del reemplazo de almacenamiento.  En el siguiente ejemplo, el nodo 2 ha sido reemplazado y muestra el estado actual como "En toma de control".

+
[listing]
----
node1:> storage failover show
                                    Takeover
Node              Partner           Possible     State Description
------------      ------------      --------     -------------------------------------
node1             node2             false        In takeover
node2             node1             -            Waiting for giveback
----
. Devolver la controladora:
+
.. Desde el controlador en buen estado, devuelva el almacenamiento del controlador reemplazado: `_storage failover giveback -ofnode replacement_node_name_`
+
La controladora recupera su almacenamiento y completa el arranque.

+

NOTE: Si el retorno se vetó, puede considerar la sustitución de los vetos.

+
Para obtener más información, consulte https://docs.netapp.com/us-en/ontap/high-availability/ha_manual_giveback.html#if-giveback-is-interrupted["Comandos de devolución manual"^] tema para anular el veto.

.. Una vez completada la devolución, confirme que la pareja de alta disponibilidad esté en buen estado y que la toma de control sea posible: _Storage failover show_
+
La salida de `storage failover show` El comando no debe incluir el ID del sistema cambiado en el mensaje del partner.



. Verifique que los volúmenes esperados estén presentes para cada controlador:
+
`vol show -node node-name`

. Pulse <enter> cuando se detengan los mensajes de la consola.
+
** Si ve el mensaje _login_, vaya al siguiente paso.
** Si no ve el mensaje de inicio de sesión, inicie sesión en el nodo asociado.


. Espere 5 minutos una vez que finalice el informe de devolución y compruebe el estado de conmutación por error y el estado de restauración:
+
`storage failover show`y `storage failover show-giveback`

+

NOTE: El siguiente comando solo está disponible en el nivel de privilegio del modo Diagnóstico.

. Si se desconectaron los enlaces de interconexión de HA, vuelva a conectarlos:
+
`system ha interconnect link on -node healthy-node -link 0`

+
`system ha interconnect link on -node healthy-node -link 1`

. Devuelva la controladora afectada a su funcionamiento normal devolviendo su almacenamiento:
+
`storage failover giveback -ofnode _impaired_node_name_`

. Si la devolución automática está desactivada, vuelva a habilitarla:
+
`storage failover modify -node local -auto-giveback-of true`

. Si AutoSupport está habilitado, restaure o desactive la creación automática de casos:
+
`system node autosupport invoke -node * -type all -message MAINT=END`





== Paso 5: Devuelva la pieza que falló a NetApp

Devuelva la pieza que ha fallado a NetApp, como se describe en las instrucciones de RMA que se suministran con el kit. Consulte https://mysupport.netapp.com/site/info/rma["Devolución de piezas y sustituciones"] la página para obtener más información.
